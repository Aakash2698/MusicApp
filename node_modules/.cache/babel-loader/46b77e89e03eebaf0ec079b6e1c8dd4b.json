{"ast":null,"code":"import SetAuthToken from\"../Utils/SetAuthToken\";import jwt_decode from\"jwt-decode\";import history from\"../history\";import{SET_CURRENT_USER,USER_LOADING,SHOW_LOADER,HIDE_LOADER,USER_DATA}from\"../ActionTypes/ActionTypes.jsx\";export var loginUser=function loginUser(payload){return function(dispatch,getState,Api){return Api.post(\"login\",payload,\"header\").then(function(res){if(res.response.status===201){var token=res.responseData.token;localStorage.setItem(\"jwtToken\",token);SetAuthToken(token);var decoded=jwt_decode(token);dispatch(setCurrentUser(decoded));}return res;});};};export var googleLogin=function googleLogin(payload){return function(dispatch,getState,Api){return Api.post(\"google-login\",payload,\"header\").then(function(res){console.log(res);if(res.response.status===200){var token=res.responseData.token;localStorage.setItem(\"jwtToken\",token);SetAuthToken(token);var decoded=jwt_decode(token);dispatch(setCurrentUser(decoded));}return res;});};};export var registerUser=function registerUser(payload){return function(dispatch,getState,Api){return Api.post(\"register\",payload,\"header\").then(function(res){// if (res.response.status === 201) {\n// }\nreturn res;});};};export var setCurrentUser=function setCurrentUser(decoded){return{type:SET_CURRENT_USER,payload:decoded};};export var setUserLoading=function setUserLoading(){return{type:USER_LOADING};};export var logoutUser=function logoutUser(){return function(dispatch){localStorage.removeItem(\"id\");SetAuthToken(false);dispatch(setCurrentUser({}));};};export var logoutSuccess=function logoutSuccess(){// global.check_Auth(history);\n// localStorage.clear();\nhistory.push(\"/login\");// logoutFirebase();\nreturn{type:LOGOUT};};export var showLoader=function showLoader(){return function(dispatch){dispatch({type:SHOW_LOADER});window.setTimeout(function(){dispatch({type:HIDE_LOADER});},500);};};export var hideLoader=function hideLoader(){return function(dispatch){dispatch({type:HIDE_LOADER});};};export var setUserData=function setUserData(payload){return function(dispatch){return dispatch({type:USER_DATA,payload:payload});};};","map":{"version":3,"sources":["/Users/akashsuryavanshi/Dropbox/My Mac (Akashs-iMac.local)/Documents/Tunex Workspace/Git Repo/MusicApp/src/Actions/Auth.jsx"],"names":["SetAuthToken","jwt_decode","history","SET_CURRENT_USER","USER_LOADING","SHOW_LOADER","HIDE_LOADER","USER_DATA","loginUser","payload","dispatch","getState","Api","post","then","res","response","status","token","responseData","localStorage","setItem","decoded","setCurrentUser","googleLogin","console","log","registerUser","type","setUserLoading","logoutUser","removeItem","logoutSuccess","push","LOGOUT","showLoader","window","setTimeout","hideLoader","setUserData"],"mappings":"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","sourcesContent":["import SetAuthToken from \"../Utils/SetAuthToken\";\nimport jwt_decode from \"jwt-decode\";\nimport history from \"../history\";\n\nimport {\n  SET_CURRENT_USER,\n  USER_LOADING,\n  SHOW_LOADER,\n  HIDE_LOADER,\n  USER_DATA,\n} from \"../ActionTypes/ActionTypes.jsx\";\n\nexport const loginUser = (payload) => (dispatch, getState, Api) => {\n  return Api.post(\"login\", payload, \"header\").then((res) => {\n    if (res.response.status === 201) {\n      let token = res.responseData.token;\n      localStorage.setItem(\"jwtToken\", token);\n      SetAuthToken(token);\n      const decoded = jwt_decode(token);\n      dispatch(setCurrentUser(decoded));\n    }\n    return res;\n  });\n};\n\nexport const googleLogin = (payload) => (dispatch, getState, Api) => {\n  return Api.post(\"google-login\", payload, \"header\").then((res) => {\n    console.log(res);\n    if (res.response.status === 200) {\n      const token = res.responseData.token;\n      localStorage.setItem(\"jwtToken\", token);\n      SetAuthToken(token);\n      const decoded = jwt_decode(token);\n      dispatch(setCurrentUser(decoded));\n    }\n    return res;\n  });\n};\n\nexport const registerUser = (payload) => (dispatch, getState, Api) => {\n  return Api.post(\"register\", payload, \"header\").then((res) => {\n    // if (res.response.status === 201) {\n\n    // }\n    return res;\n  });\n};\n\nexport const setCurrentUser = (decoded) => {\n  return {\n    type: SET_CURRENT_USER,\n    payload: decoded,\n  };\n};\n\nexport const setUserLoading = () => {\n  return {\n    type: USER_LOADING,\n  };\n};\n\nexport const logoutUser = () => (dispatch) => {\n  localStorage.removeItem(\"id\");\n  SetAuthToken(false);\n  dispatch(setCurrentUser({}));\n};\n\nexport const logoutSuccess = () => {\n  // global.check_Auth(history);\n  // localStorage.clear();\n  history.push(\"/login\");\n  // logoutFirebase();\n  return {\n    type: LOGOUT,\n  };\n};\n\nexport const showLoader = () => (dispatch) => {\n  dispatch({\n    type: SHOW_LOADER,\n  });\n  window.setTimeout(() => {\n    dispatch({\n      type: HIDE_LOADER,\n    });\n  }, 500);\n};\n\nexport const hideLoader = () => (dispatch) => {\n  dispatch({\n    type: HIDE_LOADER,\n  });\n};\n\nexport const setUserData = (payload) => (dispatch) => {\n  return dispatch({\n    type: USER_DATA,\n    payload: payload,\n  });\n};\n"]},"metadata":{},"sourceType":"module"}