{"ast":null,"code":"import SetAuthToken from \"../Utils/SetAuthToken\";\nimport jwt_decode from \"jwt-decode\";\nimport history from \"../history\";\nimport { SET_CURRENT_USER, USER_LOADING, GET_ERRORS } from \"../ActionTypes/ActionTypes.jsx\"; // export const registerUser = (userData, history) => {\n//   return async (dispatch) => {\n//     const url = \"http://localhost:4000/user/register\";\n//     const response = await fetch(url, {\n//       method: \"POST\",\n//       headers: {\n//         Accept: \"application/json\",\n//         \"Content-Type\": \"application/json\",\n//       },\n//       body: JSON.stringify(userData),\n//     })\n//       .then((res) => history.push(\"/home-page\"))\n//       .catch((err) =>\n//         dispatch({\n//           type: GET_ERRORS,\n//           payload: err,\n//         })\n//       );\n//     return err;\n//   };\n// };\n// export const loginUser = (userData) => {\n//   return async (dispatch) => {\n//     const api = \"http://localhost:4000/user/login\";\n//     fetch(api, {\n//       method: \"POST\",\n//       headers: {\n//         Accept: \"application/json\",\n//         \"Content-Type\": \"application/json\",\n//       },\n//       body: JSON.stringify(userData),\n//     })\n//       .then((res) => {\n//         console.log(res);\n//         return res;\n//       })\n//       // .then((response) => response.json())\n//       // .then((response) => {\n//       //   console.log(typeof response);\n//       //   // console.log(response);\n//       //   // return response;\n//       // })\n//       .catch((err) => {\n//         console.log(err);\n//       });\n//   };\n// };\n// export const loginUser = (userData) => {\n//   return async (dispatch) => {\n//     const url = \"http://localhost:4000/user/login\";\n//     await fetch(url, {\n//       method: \"POST\",\n//       headers: {\n//         Accept: \"application/json\",\n//         \"Content-Type\": \"application/json\",\n//       },\n//       body: JSON.stringify(userData),\n//     }).then((res) => {\n//       console.log(\"RES\", res);\n//       res.json().then((json) => {\n//         console.log(\"res\", json);\n//         if (json.token) {\n//           const token = json.token;\n//           localStorage.setItem(\"jwtToken\", token);\n//           SetAuthToken(token);\n//           const decoded = jwt_decode(token);\n//           dispatch(setCurrentUser(decoded));\n//           history.push({\n//             pathname: \"/home\",\n//           });\n//         }\n//       });\n//     });\n//   };\n// };\n\nexport const loginUser = payload => (dispatch, getState, Api) => {\n  return Api.post(\"login\", payload, \"header\").then(res => {\n    if (res.response.status === 201) {\n      const token = res.responseData.token;\n      console.log(token);\n      localStorage.setItem(\"jwtToken\", token);\n      SetAuthToken(token);\n      const decoded = jwt_decode(token);\n      dispatch(setCurrentUser(decoded)); // history.push({\n      //   pathname: \"/home\",\n      // });\n      // dispatch(loginSuccess(res.responseData.response_data));\n    }\n\n    return res;\n  });\n};\nexport const registerUser = payload => (dispatch, getState, Api) => {\n  return Api.post(\"register\", payload, \"header\").then(res => {\n    // if (res.response.status === 201) {\n    // }\n    return res;\n  });\n};\nexport const setCurrentUser = decoded => {\n  return {\n    type: SET_CURRENT_USER,\n    payload: decoded\n  };\n};\nexport const setUserLoading = () => {\n  return {\n    type: USER_LOADING\n  };\n};\nexport const logoutUser = () => dispatch => {\n  localStorage.removeItem(\"jwtToken\");\n  SetAuthToken(false);\n  dispatch(setCurrentUser({}));\n};\nexport const logoutSuccess = () => {\n  // global.check_Auth(history);\n  localStorage.clear();\n  history.push(\"/login\"); // logoutFirebase();\n\n  return {\n    type: LOGOUT\n  };\n};","map":{"version":3,"sources":["/Users/akashsuryavanshi/Dropbox/My Mac (Akashs-iMac.local)/Documents/Tunex Workspace/Git Repo/music-app/src/Actions/Auth.jsx"],"names":["SetAuthToken","jwt_decode","history","SET_CURRENT_USER","USER_LOADING","GET_ERRORS","loginUser","payload","dispatch","getState","Api","post","then","res","response","status","token","responseData","console","log","localStorage","setItem","decoded","setCurrentUser","registerUser","type","setUserLoading","logoutUser","removeItem","logoutSuccess","clear","push","LOGOUT"],"mappings":"AAAA,OAAOA,YAAP,MAAyB,uBAAzB;AACA,OAAOC,UAAP,MAAuB,YAAvB;AACA,OAAOC,OAAP,MAAoB,YAApB;AAEA,SACEC,gBADF,EAEEC,YAFF,EAGEC,UAHF,QAIO,gCAJP,C,CAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,OAAO,MAAMC,SAAS,GAAIC,OAAD,IAAa,CAACC,QAAD,EAAWC,QAAX,EAAqBC,GAArB,KAA6B;AACjE,SAAOA,GAAG,CAACC,IAAJ,CAAS,OAAT,EAAkBJ,OAAlB,EAA2B,QAA3B,EAAqCK,IAArC,CAA2CC,GAAD,IAAS;AACxD,QAAIA,GAAG,CAACC,QAAJ,CAAaC,MAAb,KAAwB,GAA5B,EAAiC;AAC/B,YAAMC,KAAK,GAAGH,GAAG,CAACI,YAAJ,CAAiBD,KAA/B;AACAE,MAAAA,OAAO,CAACC,GAAR,CAAYH,KAAZ;AACAI,MAAAA,YAAY,CAACC,OAAb,CAAqB,UAArB,EAAiCL,KAAjC;AACAhB,MAAAA,YAAY,CAACgB,KAAD,CAAZ;AACA,YAAMM,OAAO,GAAGrB,UAAU,CAACe,KAAD,CAA1B;AACAR,MAAAA,QAAQ,CAACe,cAAc,CAACD,OAAD,CAAf,CAAR,CAN+B,CAO/B;AACA;AACA;AACA;AACD;;AACD,WAAOT,GAAP;AACD,GAdM,CAAP;AAeD,CAhBM;AAiBP,OAAO,MAAMW,YAAY,GAAIjB,OAAD,IAAa,CAACC,QAAD,EAAWC,QAAX,EAAqBC,GAArB,KAA6B;AACpE,SAAOA,GAAG,CAACC,IAAJ,CAAS,UAAT,EAAqBJ,OAArB,EAA8B,QAA9B,EAAwCK,IAAxC,CAA8CC,GAAD,IAAS;AAC3D;AAEA;AACA,WAAOA,GAAP;AACD,GALM,CAAP;AAMD,CAPM;AASP,OAAO,MAAMU,cAAc,GAAID,OAAD,IAAa;AACzC,SAAO;AACLG,IAAAA,IAAI,EAAEtB,gBADD;AAELI,IAAAA,OAAO,EAAEe;AAFJ,GAAP;AAID,CALM;AAOP,OAAO,MAAMI,cAAc,GAAG,MAAM;AAClC,SAAO;AACLD,IAAAA,IAAI,EAAErB;AADD,GAAP;AAGD,CAJM;AAMP,OAAO,MAAMuB,UAAU,GAAG,MAAOnB,QAAD,IAAc;AAC5CY,EAAAA,YAAY,CAACQ,UAAb,CAAwB,UAAxB;AACA5B,EAAAA,YAAY,CAAC,KAAD,CAAZ;AACAQ,EAAAA,QAAQ,CAACe,cAAc,CAAC,EAAD,CAAf,CAAR;AACD,CAJM;AAMP,OAAO,MAAMM,aAAa,GAAG,MAAM;AACjC;AACAT,EAAAA,YAAY,CAACU,KAAb;AACA5B,EAAAA,OAAO,CAAC6B,IAAR,CAAa,QAAb,EAHiC,CAIjC;;AACA,SAAO;AACLN,IAAAA,IAAI,EAAEO;AADD,GAAP;AAGD,CARM","sourcesContent":["import SetAuthToken from \"../Utils/SetAuthToken\";\nimport jwt_decode from \"jwt-decode\";\nimport history from \"../history\";\n\nimport {\n  SET_CURRENT_USER,\n  USER_LOADING,\n  GET_ERRORS,\n} from \"../ActionTypes/ActionTypes.jsx\";\n\n// export const registerUser = (userData, history) => {\n//   return async (dispatch) => {\n//     const url = \"http://localhost:4000/user/register\";\n//     const response = await fetch(url, {\n//       method: \"POST\",\n//       headers: {\n//         Accept: \"application/json\",\n//         \"Content-Type\": \"application/json\",\n//       },\n//       body: JSON.stringify(userData),\n//     })\n//       .then((res) => history.push(\"/home-page\"))\n//       .catch((err) =>\n//         dispatch({\n//           type: GET_ERRORS,\n//           payload: err,\n//         })\n//       );\n//     return err;\n//   };\n// };\n\n// export const loginUser = (userData) => {\n//   return async (dispatch) => {\n//     const api = \"http://localhost:4000/user/login\";\n//     fetch(api, {\n//       method: \"POST\",\n//       headers: {\n//         Accept: \"application/json\",\n//         \"Content-Type\": \"application/json\",\n//       },\n//       body: JSON.stringify(userData),\n//     })\n//       .then((res) => {\n//         console.log(res);\n//         return res;\n//       })\n\n//       // .then((response) => response.json())\n//       // .then((response) => {\n//       //   console.log(typeof response);\n\n//       //   // console.log(response);\n//       //   // return response;\n//       // })\n//       .catch((err) => {\n//         console.log(err);\n//       });\n//   };\n// };\n\n// export const loginUser = (userData) => {\n//   return async (dispatch) => {\n//     const url = \"http://localhost:4000/user/login\";\n//     await fetch(url, {\n//       method: \"POST\",\n//       headers: {\n//         Accept: \"application/json\",\n//         \"Content-Type\": \"application/json\",\n//       },\n//       body: JSON.stringify(userData),\n//     }).then((res) => {\n//       console.log(\"RES\", res);\n//       res.json().then((json) => {\n//         console.log(\"res\", json);\n//         if (json.token) {\n//           const token = json.token;\n//           localStorage.setItem(\"jwtToken\", token);\n//           SetAuthToken(token);\n//           const decoded = jwt_decode(token);\n//           dispatch(setCurrentUser(decoded));\n//           history.push({\n//             pathname: \"/home\",\n//           });\n//         }\n//       });\n//     });\n//   };\n// };\n\nexport const loginUser = (payload) => (dispatch, getState, Api) => {\n  return Api.post(\"login\", payload, \"header\").then((res) => {\n    if (res.response.status === 201) {\n      const token = res.responseData.token;\n      console.log(token);\n      localStorage.setItem(\"jwtToken\", token);\n      SetAuthToken(token);\n      const decoded = jwt_decode(token);\n      dispatch(setCurrentUser(decoded));\n      // history.push({\n      //   pathname: \"/home\",\n      // });\n      // dispatch(loginSuccess(res.responseData.response_data));\n    }\n    return res;\n  });\n};\nexport const registerUser = (payload) => (dispatch, getState, Api) => {\n  return Api.post(\"register\", payload, \"header\").then((res) => {\n    // if (res.response.status === 201) {\n\n    // }\n    return res;\n  });\n};\n\nexport const setCurrentUser = (decoded) => {\n  return {\n    type: SET_CURRENT_USER,\n    payload: decoded,\n  };\n};\n\nexport const setUserLoading = () => {\n  return {\n    type: USER_LOADING,\n  };\n};\n\nexport const logoutUser = () => (dispatch) => {\n  localStorage.removeItem(\"jwtToken\");\n  SetAuthToken(false);\n  dispatch(setCurrentUser({}));\n};\n\nexport const logoutSuccess = () => {\n  // global.check_Auth(history);\n  localStorage.clear();\n  history.push(\"/login\");\n  // logoutFirebase();\n  return {\n    type: LOGOUT,\n  };\n};\n"]},"metadata":{},"sourceType":"module"}