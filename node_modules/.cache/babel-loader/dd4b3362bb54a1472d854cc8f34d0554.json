{"ast":null,"code":"import SetAuthToken from \"../Utils/SetAuthToken\";\nimport jwt_decode from \"jwt-decode\";\nimport history from \"../history\";\nimport { SET_CURRENT_USER, USER_LOADING, GET_ERRORS } from \"../ActionTypes/ActionTypes.jsx\";\nimport data from \"@iconify-icons/ion/md-volume-low\";\nexport const registerUser = (userData, history) => {\n  return async dispatch => {\n    const url = \"http://localhost:4000/user/register\";\n    const response = await fetch(url, {\n      method: \"POST\",\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(userData)\n    }).then(res => history.push(\"/home-page\")).catch(err => dispatch({\n      type: GET_ERRORS,\n      payload: err\n    }));\n  };\n};\nexport const loginUser = userData => {\n  let returnData = \"\";\n\n  async dispatch => {\n    const url = \"http://localhost:4000/user/login\";\n    const response = await fetch(url, {\n      method: \"POST\",\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(userData)\n    }).then(res => {\n      res.json().then(json => {\n        if (json.json.token) {\n          const token = json.token;\n          localStorage.setItem(\"jwtToken\", token);\n          SetAuthToken(token);\n          const decoded = jwt_decode(token);\n          dispatch(setCurrentUser(decoded));\n          history.push({\n            pathname: \"/home\"\n          });\n        } else {\n          returnData = {\n            type: GET_ERRORS,\n            isError: false,\n            status: 200,\n            error: \"\",\n            payload: json\n          };\n        }\n      }).catch(error => {\n        returnData = {\n          isError: true,\n          status: 500,\n          error: error,\n          data: []\n        };\n      });\n      return returnData;\n    });\n  };\n};\nexport const setCurrentUser = decoded => {\n  return {\n    type: SET_CURRENT_USER,\n    payload: decoded\n  };\n};\nexport const setUserLoading = () => {\n  return {\n    type: USER_LOADING\n  };\n};\nexport const logoutUser = () => dispatch => {\n  localStorage.removeItem(\"jwtToken\");\n  SetAuthToken(false);\n  dispatch(setCurrentUser({}));\n};","map":{"version":3,"sources":["/Users/akashsuryavanshi/Dropbox/My Mac (Akashs-iMac.local)/Documents/Tunex Workspace/Git Repo/music-app/src/Actions/Auth.jsx"],"names":["SetAuthToken","jwt_decode","history","SET_CURRENT_USER","USER_LOADING","GET_ERRORS","data","registerUser","userData","dispatch","url","response","fetch","method","headers","Accept","body","JSON","stringify","then","res","push","catch","err","type","payload","loginUser","returnData","json","token","localStorage","setItem","decoded","setCurrentUser","pathname","isError","status","error","setUserLoading","logoutUser","removeItem"],"mappings":"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","sourcesContent":["import SetAuthToken from \"../Utils/SetAuthToken\";\nimport jwt_decode from \"jwt-decode\";\nimport history from \"../history\";\n\nimport {\n  SET_CURRENT_USER,\n  USER_LOADING,\n  GET_ERRORS,\n} from \"../ActionTypes/ActionTypes.jsx\";\nimport data from \"@iconify-icons/ion/md-volume-low\";\n\nexport const registerUser = (userData, history) => {\n  return async (dispatch) => {\n    const url = \"http://localhost:4000/user/register\";\n    const response = await fetch(url, {\n      method: \"POST\",\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify(userData),\n    })\n      .then((res) => history.push(\"/home-page\"))\n      .catch((err) =>\n        dispatch({\n          type: GET_ERRORS,\n          payload: err,\n        })\n      );\n  };\n};\n\nexport const loginUser = (userData) => {\n  let returnData = \"\";\n  async (dispatch) => {\n    const url = \"http://localhost:4000/user/login\";\n    const response = await fetch(url, {\n      method: \"POST\",\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify(userData),\n    }).then((res) => {\n      res\n        .json()\n        .then((json) => {\n          if (json.json.token) {\n            const token = json.token;\n            localStorage.setItem(\"jwtToken\", token);\n            SetAuthToken(token);\n            const decoded = jwt_decode(token);\n            dispatch(setCurrentUser(decoded));\n            history.push({\n              pathname: \"/home\",\n            });\n          } else {\n            returnData = {\n              type: GET_ERRORS,\n              isError: false,\n              status: 200,\n              error: \"\",\n              payload: json,\n            };\n          }\n        })\n        .catch((error) => {\n          returnData = {\n            isError: true,\n            status: 500,\n            error: error,\n            data: [],\n          };\n        });\n      return returnData;\n    });\n  };\n};\n\nexport const setCurrentUser = (decoded) => {\n  return {\n    type: SET_CURRENT_USER,\n    payload: decoded,\n  };\n};\n\nexport const setUserLoading = () => {\n  return {\n    type: USER_LOADING,\n  };\n};\n\nexport const logoutUser = () => (dispatch) => {\n  localStorage.removeItem(\"jwtToken\");\n  SetAuthToken(false);\n  dispatch(setCurrentUser({}));\n};\n"]},"metadata":{},"sourceType":"module"}