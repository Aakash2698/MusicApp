{"ast":null,"code":"import SetAuthToken from \"../Utils/SetAuthToken\";\nimport jwt_decode from \"jwt-decode\";\nimport { SET_CURRENT_USER, USER_LOADING // GET_ERRORS,\n} from \"../ActionTypes/ActionTypes.jsx\";\nexport const registerUser = (userData, history) => {\n  return async dispatch => {\n    const url = \"http://localhost:4000/user/register\";\n    const response = await fetch(url, {\n      method: \"POST\",\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(userData)\n    }).then(res => {\n      console.log(res);\n    }); // .then((res) => history.push(\"/home-page\"))\n    // .catch((err) =>\n    //   dispatch({\n    //     type: GET_ERRORS,\n    //     payload: err.response.data,\n    //   })\n    // );\n  };\n};\nexport const loginUser = userData => {\n  return async dispatch => {\n    const url = \"http://localhost:4000/user/login\";\n    const response = await fetch(url, {\n      method: \"POST\",\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(userData)\n    }).then(res => {\n      res.json().then(json => {\n        const token = json.token;\n        localStorage.setItem(\"jwtToken\", token);\n        SetAuthToken(token);\n        const decoded = jwt_decode(token);\n        dispatch(setCurrentUser(decoded));\n      });\n    });\n  };\n};\nexport const setCurrentUser = decoded => {\n  return {\n    type: SET_CURRENT_USER,\n    payload: decoded\n  };\n};\nexport const setUserLoading = () => {\n  return {\n    type: USER_LOADING\n  };\n};\nexport const logoutUser = () => dispatch => {\n  localStorage.removeItem(\"jwtToken\");\n  SetAuthToken(false);\n  dispatch(setCurrentUser({}));\n};","map":{"version":3,"sources":["/Users/akashsuryavanshi/Dropbox/My Mac (Akashs-iMac.local)/Documents/Tunex Workspace/Git Repo/music-app/src/Actions/Auth.jsx"],"names":["SetAuthToken","jwt_decode","SET_CURRENT_USER","USER_LOADING","registerUser","userData","history","dispatch","url","response","fetch","method","headers","Accept","body","JSON","stringify","then","res","console","log","loginUser","json","token","localStorage","setItem","decoded","setCurrentUser","type","payload","setUserLoading","logoutUser","removeItem"],"mappings":"AAAA,OAAOA,YAAP,MAAyB,uBAAzB;AACA,OAAOC,UAAP,MAAuB,YAAvB;AAEA,SACEC,gBADF,EAEEC,YAFF,CAGE;AAHF,OAIO,gCAJP;AAMA,OAAO,MAAMC,YAAY,GAAG,CAACC,QAAD,EAAWC,OAAX,KAAuB;AACjD,SAAO,MAAOC,QAAP,IAAoB;AACzB,UAAMC,GAAG,GAAG,qCAAZ;AACA,UAAMC,QAAQ,GAAG,MAAMC,KAAK,CAACF,GAAD,EAAM;AAChCG,MAAAA,MAAM,EAAE,MADwB;AAEhCC,MAAAA,OAAO,EAAE;AACPC,QAAAA,MAAM,EAAE,kBADD;AAEP,wBAAgB;AAFT,OAFuB;AAMhCC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeX,QAAf;AAN0B,KAAN,CAAL,CAOpBY,IAPoB,CAOdC,GAAD,IAAS;AACfC,MAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACD,KATsB,CAAvB,CAFyB,CAazB;AACA;AACA;AACA;AACA;AACA;AACA;AACD,GApBD;AAqBD,CAtBM;AAwBP,OAAO,MAAMG,SAAS,GAAIhB,QAAD,IAAc;AACrC,SAAO,MAAOE,QAAP,IAAoB;AACzB,UAAMC,GAAG,GAAG,kCAAZ;AACA,UAAMC,QAAQ,GAAG,MAAMC,KAAK,CAACF,GAAD,EAAM;AAChCG,MAAAA,MAAM,EAAE,MADwB;AAEhCC,MAAAA,OAAO,EAAE;AACPC,QAAAA,MAAM,EAAE,kBADD;AAEP,wBAAgB;AAFT,OAFuB;AAMhCC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeX,QAAf;AAN0B,KAAN,CAAL,CAOpBY,IAPoB,CAOdC,GAAD,IAAS;AACfA,MAAAA,GAAG,CAACI,IAAJ,GAAWL,IAAX,CAAiBK,IAAD,IAAU;AACxB,cAAMC,KAAK,GAAGD,IAAI,CAACC,KAAnB;AACAC,QAAAA,YAAY,CAACC,OAAb,CAAqB,UAArB,EAAiCF,KAAjC;AACAvB,QAAAA,YAAY,CAACuB,KAAD,CAAZ;AACA,cAAMG,OAAO,GAAGzB,UAAU,CAACsB,KAAD,CAA1B;AACAhB,QAAAA,QAAQ,CAACoB,cAAc,CAACD,OAAD,CAAf,CAAR;AACD,OAND;AAOD,KAfsB,CAAvB;AAgBD,GAlBD;AAmBD,CApBM;AAsBP,OAAO,MAAMC,cAAc,GAAID,OAAD,IAAa;AACzC,SAAO;AACLE,IAAAA,IAAI,EAAE1B,gBADD;AAEL2B,IAAAA,OAAO,EAAEH;AAFJ,GAAP;AAID,CALM;AAOP,OAAO,MAAMI,cAAc,GAAG,MAAM;AAClC,SAAO;AACLF,IAAAA,IAAI,EAAEzB;AADD,GAAP;AAGD,CAJM;AAMP,OAAO,MAAM4B,UAAU,GAAG,MAAOxB,QAAD,IAAc;AAC5CiB,EAAAA,YAAY,CAACQ,UAAb,CAAwB,UAAxB;AACAhC,EAAAA,YAAY,CAAC,KAAD,CAAZ;AACAO,EAAAA,QAAQ,CAACoB,cAAc,CAAC,EAAD,CAAf,CAAR;AACD,CAJM","sourcesContent":["import SetAuthToken from \"../Utils/SetAuthToken\";\nimport jwt_decode from \"jwt-decode\";\n\nimport {\n  SET_CURRENT_USER,\n  USER_LOADING,\n  // GET_ERRORS,\n} from \"../ActionTypes/ActionTypes.jsx\";\n\nexport const registerUser = (userData, history) => {\n  return async (dispatch) => {\n    const url = \"http://localhost:4000/user/register\";\n    const response = await fetch(url, {\n      method: \"POST\",\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify(userData),\n    }).then((res) => {\n      console.log(res);\n    });\n\n    // .then((res) => history.push(\"/home-page\"))\n    // .catch((err) =>\n    //   dispatch({\n    //     type: GET_ERRORS,\n    //     payload: err.response.data,\n    //   })\n    // );\n  };\n};\n\nexport const loginUser = (userData) => {\n  return async (dispatch) => {\n    const url = \"http://localhost:4000/user/login\";\n    const response = await fetch(url, {\n      method: \"POST\",\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify(userData),\n    }).then((res) => {\n      res.json().then((json) => {\n        const token = json.token;\n        localStorage.setItem(\"jwtToken\", token);\n        SetAuthToken(token);\n        const decoded = jwt_decode(token);\n        dispatch(setCurrentUser(decoded));\n      });\n    });\n  };\n};\n\nexport const setCurrentUser = (decoded) => {\n  return {\n    type: SET_CURRENT_USER,\n    payload: decoded,\n  };\n};\n\nexport const setUserLoading = () => {\n  return {\n    type: USER_LOADING,\n  };\n};\n\nexport const logoutUser = () => (dispatch) => {\n  localStorage.removeItem(\"jwtToken\");\n  SetAuthToken(false);\n  dispatch(setCurrentUser({}));\n};\n"]},"metadata":{},"sourceType":"module"}