{"ast":null,"code":"import SetAuthToken from \"../Utils/SetAuthToken\";\nimport jwt_decode from \"jwt-decode\";\nimport history from \"../history\";\nimport { SET_CURRENT_USER, USER_LOADING, GET_ERRORS } from \"../ActionTypes/ActionTypes.jsx\";\nimport data from \"@iconify-icons/ion/md-volume-low\";\nexport const registerUser = (userData, history) => {\n  return async dispatch => {\n    const url = \"http://localhost:4000/user/register\";\n    const response = await fetch(url, {\n      method: \"POST\",\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(userData)\n    }).then(res => history.push(\"/home-page\")).catch(err => dispatch({\n      type: GET_ERRORS,\n      payload: err\n    }));\n  };\n};\nexport async function loginUser(userData) {\n  // return async (dispatch) => {\n  const api = \"http://localhost:4000/user/login\";\n  await fetch(api, {\n    method: \"POST\",\n    headers: {\n      Accept: \"application/json\",\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify(userData)\n  }).then(data => {\n    console.log(data);\n\n    if (data) {\n      returnData = {\n        // isError: true,\n        // status: 404,\n        error: data.errors[0].message // data: [],\n\n      };\n    } else {\n      returnData = {\n        // isError: false,\n        // status: 200,\n        // error: \"\",\n        data: data\n      };\n    }\n  }).catch(error => {\n    returnData = {\n      // isError: true,\n      // status: 500,\n      error: error // data: [],\n\n    };\n  });\n  return returnData; // .then((response) => response.json())\n  // .then((response) => {\n  //   console.log(response);\n  //   return response;\n  // })\n  // .catch((err) => {\n  //   console.log(err);\n  // });\n  // };\n} // export const loginUser = (userData) => {\n//   return async (dispatch) => {\n//     const url = \"http://localhost:4000/user/login\";\n//     const response = await fetch(url, {\n//       method: \"POST\",\n//       headers: {\n//         Accept: \"application/json\",\n//         \"Content-Type\": \"application/json\",\n//       },\n//       body: JSON.stringify(userData),\n//     }).then((res) => {\n//       res.json().then((json) => {\n//         if (json.token) {\n//           const token = json.token;\n//           localStorage.setItem(\"jwtToken\", token);\n//           SetAuthToken(token);\n//           const decoded = jwt_decode(token);\n//           dispatch(setCurrentUser(decoded));\n//           history.push({\n//             pathname: \"/home\",\n//           });\n//         }\n//         return json;\n//       });\n//     });\n//   };\n// };\n\nexport const setCurrentUser = decoded => {\n  return {\n    type: SET_CURRENT_USER,\n    payload: decoded\n  };\n};\nexport const setUserLoading = () => {\n  return {\n    type: USER_LOADING\n  };\n};\nexport const logoutUser = () => dispatch => {\n  localStorage.removeItem(\"jwtToken\");\n  SetAuthToken(false);\n  dispatch(setCurrentUser({}));\n};","map":{"version":3,"sources":["/Users/akashsuryavanshi/Dropbox/My Mac (Akashs-iMac.local)/Documents/Tunex Workspace/Git Repo/music-app/src/Actions/Auth.jsx"],"names":["SetAuthToken","jwt_decode","history","SET_CURRENT_USER","USER_LOADING","GET_ERRORS","data","registerUser","userData","dispatch","url","response","fetch","method","headers","Accept","body","JSON","stringify","then","res","push","catch","err","type","payload","loginUser","api","console","log","returnData","error","errors","message","setCurrentUser","decoded","setUserLoading","logoutUser","localStorage","removeItem"],"mappings":"AAAA,OAAOA,YAAP,MAAyB,uBAAzB;AACA,OAAOC,UAAP,MAAuB,YAAvB;AACA,OAAOC,OAAP,MAAoB,YAApB;AAEA,SACEC,gBADF,EAEEC,YAFF,EAGEC,UAHF,QAIO,gCAJP;AAKA,OAAOC,IAAP,MAAiB,kCAAjB;AAEA,OAAO,MAAMC,YAAY,GAAG,CAACC,QAAD,EAAWN,OAAX,KAAuB;AACjD,SAAO,MAAOO,QAAP,IAAoB;AACzB,UAAMC,GAAG,GAAG,qCAAZ;AACA,UAAMC,QAAQ,GAAG,MAAMC,KAAK,CAACF,GAAD,EAAM;AAChCG,MAAAA,MAAM,EAAE,MADwB;AAEhCC,MAAAA,OAAO,EAAE;AACPC,QAAAA,MAAM,EAAE,kBADD;AAEP,wBAAgB;AAFT,OAFuB;AAMhCC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeV,QAAf;AAN0B,KAAN,CAAL,CAQpBW,IARoB,CAQdC,GAAD,IAASlB,OAAO,CAACmB,IAAR,CAAa,YAAb,CARM,EASpBC,KAToB,CASbC,GAAD,IACLd,QAAQ,CAAC;AACPe,MAAAA,IAAI,EAAEnB,UADC;AAEPoB,MAAAA,OAAO,EAAEF;AAFF,KAAD,CAVW,CAAvB;AAeD,GAjBD;AAkBD,CAnBM;AAqBP,OAAO,eAAeG,SAAf,CAAyBlB,QAAzB,EAAmC;AACxC;AACA,QAAMmB,GAAG,GAAG,kCAAZ;AACA,QAAMf,KAAK,CAACe,GAAD,EAAM;AACfd,IAAAA,MAAM,EAAE,MADO;AAEfC,IAAAA,OAAO,EAAE;AACPC,MAAAA,MAAM,EAAE,kBADD;AAEP,sBAAgB;AAFT,KAFM;AAMfC,IAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeV,QAAf;AANS,GAAN,CAAL,CAQHW,IARG,CAQGb,IAAD,IAAU;AACdsB,IAAAA,OAAO,CAACC,GAAR,CAAYvB,IAAZ;;AACA,QAAIA,IAAJ,EAAU;AACRwB,MAAAA,UAAU,GAAG;AACX;AACA;AACAC,QAAAA,KAAK,EAAEzB,IAAI,CAAC0B,MAAL,CAAY,CAAZ,EAAeC,OAHX,CAIX;;AAJW,OAAb;AAMD,KAPD,MAOO;AACLH,MAAAA,UAAU,GAAG;AACX;AACA;AACA;AACAxB,QAAAA,IAAI,EAAEA;AAJK,OAAb;AAMD;AACF,GAzBG,EA0BHgB,KA1BG,CA0BIS,KAAD,IAAW;AAChBD,IAAAA,UAAU,GAAG;AACX;AACA;AACAC,MAAAA,KAAK,EAAEA,KAHI,CAIX;;AAJW,KAAb;AAMD,GAjCG,CAAN;AAkCA,SAAOD,UAAP,CArCwC,CAsCxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACD,C,CAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,OAAO,MAAMI,cAAc,GAAIC,OAAD,IAAa;AACzC,SAAO;AACLX,IAAAA,IAAI,EAAErB,gBADD;AAELsB,IAAAA,OAAO,EAAEU;AAFJ,GAAP;AAID,CALM;AAOP,OAAO,MAAMC,cAAc,GAAG,MAAM;AAClC,SAAO;AACLZ,IAAAA,IAAI,EAAEpB;AADD,GAAP;AAGD,CAJM;AAMP,OAAO,MAAMiC,UAAU,GAAG,MAAO5B,QAAD,IAAc;AAC5C6B,EAAAA,YAAY,CAACC,UAAb,CAAwB,UAAxB;AACAvC,EAAAA,YAAY,CAAC,KAAD,CAAZ;AACAS,EAAAA,QAAQ,CAACyB,cAAc,CAAC,EAAD,CAAf,CAAR;AACD,CAJM","sourcesContent":["import SetAuthToken from \"../Utils/SetAuthToken\";\nimport jwt_decode from \"jwt-decode\";\nimport history from \"../history\";\n\nimport {\n  SET_CURRENT_USER,\n  USER_LOADING,\n  GET_ERRORS,\n} from \"../ActionTypes/ActionTypes.jsx\";\nimport data from \"@iconify-icons/ion/md-volume-low\";\n\nexport const registerUser = (userData, history) => {\n  return async (dispatch) => {\n    const url = \"http://localhost:4000/user/register\";\n    const response = await fetch(url, {\n      method: \"POST\",\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify(userData),\n    })\n      .then((res) => history.push(\"/home-page\"))\n      .catch((err) =>\n        dispatch({\n          type: GET_ERRORS,\n          payload: err,\n        })\n      );\n  };\n};\n\nexport async function loginUser(userData) {\n  // return async (dispatch) => {\n  const api = \"http://localhost:4000/user/login\";\n  await fetch(api, {\n    method: \"POST\",\n    headers: {\n      Accept: \"application/json\",\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify(userData),\n  })\n    .then((data) => {\n      console.log(data);\n      if (data) {\n        returnData = {\n          // isError: true,\n          // status: 404,\n          error: data.errors[0].message,\n          // data: [],\n        };\n      } else {\n        returnData = {\n          // isError: false,\n          // status: 200,\n          // error: \"\",\n          data: data,\n        };\n      }\n    })\n    .catch((error) => {\n      returnData = {\n        // isError: true,\n        // status: 500,\n        error: error,\n        // data: [],\n      };\n    });\n  return returnData;\n  // .then((response) => response.json())\n  // .then((response) => {\n  //   console.log(response);\n  //   return response;\n  // })\n  // .catch((err) => {\n  //   console.log(err);\n  // });\n\n  // };\n}\n\n// export const loginUser = (userData) => {\n//   return async (dispatch) => {\n//     const url = \"http://localhost:4000/user/login\";\n//     const response = await fetch(url, {\n//       method: \"POST\",\n//       headers: {\n//         Accept: \"application/json\",\n//         \"Content-Type\": \"application/json\",\n//       },\n//       body: JSON.stringify(userData),\n//     }).then((res) => {\n//       res.json().then((json) => {\n//         if (json.token) {\n//           const token = json.token;\n//           localStorage.setItem(\"jwtToken\", token);\n//           SetAuthToken(token);\n//           const decoded = jwt_decode(token);\n//           dispatch(setCurrentUser(decoded));\n//           history.push({\n//             pathname: \"/home\",\n//           });\n//         }\n//         return json;\n//       });\n//     });\n//   };\n// };\n\nexport const setCurrentUser = (decoded) => {\n  return {\n    type: SET_CURRENT_USER,\n    payload: decoded,\n  };\n};\n\nexport const setUserLoading = () => {\n  return {\n    type: USER_LOADING,\n  };\n};\n\nexport const logoutUser = () => (dispatch) => {\n  localStorage.removeItem(\"jwtToken\");\n  SetAuthToken(false);\n  dispatch(setCurrentUser({}));\n};\n"]},"metadata":{},"sourceType":"module"}